<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="不忘初心,方得始终">
<meta property="og:type" content="website">
<meta property="og:title" content="流浪猫的 Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="流浪猫的 Blog">
<meta property="og:description" content="不忘初心,方得始终">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="流浪猫的 Blog">
<meta name="twitter:description" content="不忘初心,方得始终">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> 流浪猫的 Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">流浪猫的 Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/15/03-CSS3-总结/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/03/15/03-CSS3-总结/" itemprop="url">
                  CSS3-总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-15T23:47:33+08:00">
                2016-03-15
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="CSS3-总结"><a href="#CSS3-总结" class="headerlink" title="CSS3 总结"></a>CSS3 总结</h1><hr>
<h3 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h3><ul>
<li>浏览器兼容的查询地址<br>  <a href="http://caniuse.com/" target="_blank" rel="external">Can I Use</a></li>
<li>在 pc 端使用 css3 属性,要加上私有前缀<ul>
<li>-webkit- :chrome</li>
<li>-o- :opera</li>
<li>-moz- :firefox</li>
<li>-ms- :IE</li>
</ul>
</li>
<li>在移动端的主流浏览器的内核都是 webkit, 只需要考虑兼容 webkit 即可</li>
</ul>
<h3 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h3><ul>
<li>属性选择器<ul>
<li>[ attribute ]: 选中带有 attribute 属性的标签</li>
<li>[ attribute=value ]: 选中带有 attribute 属性并且值为 value 的标签</li>
<li>[ attribute!=value ]: 选中带有 attribute 属性并且值不为 value 的标签</li>
<li>[ attribute^=value ]: 选中带有 attribute 属性并且值是以 value 开头的标签</li>
<li>[ attribute$=value ]: 选中带有 attribute 属性并且值是以 value 结尾的标签</li>
<li>[ attribute*=value ]: 选中带有 attribute 属性并且值包含 value 的标签</li>
</ul>
</li>
<li>伪类选择器<ul>
<li>:first-child 选中第一个元素</li>
<li>:last-child 选中最后一个元素</li>
<li>:nth-child(number) 选中第number个元素  number为大于0的整数</li>
<li>:nth-last-child(number) 从后面选中第number个元素 number为大于0的整数</li>
<li>:empty 选中内容为空的某个元素</li>
<li>:target 选中当前的锚点</li>
<li>:not() 选中除包含()内的元素</li>
<li>:before 在目标元素的前面进行某些设置</li>
</ul>
</li>
<li><p>伪元素选择器</p>
<ul>
<li><p>::after / ::before  在目标元素的后面/前面进行某些设置<br>  常用来清除浮动</p>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:after</span>,</div><div class="line"><span class="selector-class">.clearfix</span><span class="selector-pseudo">:before</span>&#123;</div><div class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">line-height</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">display</span>: block;</div><div class="line">    <span class="attribute">visibility</span>: hidden;</div><div class="line">    <span class="attribute">clear</span>: both;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>::first-letter 设置首字或首字母,只有块级元素有效</p>
</li>
<li>::first-line 设置首行</li>
<li>::selection 设置鼠标选中的内容,不能改变字体大小</li>
</ul>
</li>
</ul>
<h3 id="颜色"><a href="#颜色" class="headerlink" title="颜色"></a>颜色</h3><ul>
<li>opacity 注意:子元素会继承父元素</li>
<li>transparent 始终完全透明,无法实现关透明</li>
<li>rgba(红色色值(0-255),绿色色值(0-255),蓝色色值(0-255),透明度) </li>
<li>hsla(色调(0-360),饱和度(0-100),亮度(0-100),透明度 </li>
</ul>
<h3 id="文本"><a href="#文本" class="headerlink" title="文本"></a>文本</h3><ul>
<li>text-shadow 文本阴影<br>  有四个参数: x轴偏移距离 y轴偏移距离 阴影的大小 阴影的颜色<br>  可以设置多个阴影,中间以逗号分隔</li>
</ul>
<h3 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h3><ul>
<li>box-sizing 设置宽高是从什么位置开始计算<br>  值1: content-box 从内容开始计算<br>  值2: border-box 从边框开始计算</li>
</ul>
<h3 id="边框"><a href="#边框" class="headerlink" title="边框"></a>边框</h3><ul>
<li>border-radius 边框圆角<br>  遵循左上,右上,右下,左下原则</li>
<li>border-shadow 边框阴影<br>  参数:x轴偏移 y轴偏移 阴影模糊度 阴影延伸距离 阴影颜色 inset(内阴影)<br>  <code>box-shadow:  -3px -3px 2px red inset</code></li>
<li>border-image 边框图片<br>  参数:图片资源路径 图片切割尺寸 边框宽度 边的平铺方式 (stretch,repeat,round)<br>  <code>border-image: url(&quot;./images/border.png&quot;) 27/20px round;</code></li>
</ul>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><ul>
<li>background-size 背景尺寸<br>  让背景完全覆盖盒子,可能会把背景裁剪 <code>background-size: cover;</code><br>  完整的显示背景,可能填不满盒子 <code>background-size: contain;</code></li>
<li>background-origin 背景原点<br>  背景的平铺从边框开始 <code>background-origin: border-box</code><br>  背景的平铺从内边距开始 <code>background-origin: padding-box</code><br>  背景的平铺从内容开始 <code>background-origin: content-box</code></li>
<li>background-clip 背景裁切<br>  背景的裁切从边框开始 <code>background-clip: border-box</code><br>  背景的裁切从内边距开始 <code>background-clip: padding-box</code><br>  背景的裁切从内容开始 <code>background-clip: content-box</code></li>
<li>多背景  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">background:</div><div class="line">        url(&quot;images/bg1.png&quot;) left top no-repeat,</div><div class="line">        url(&quot;images/bg2.png&quot;) right top no-repeat,</div><div class="line">        url(&quot;images/bg3.png&quot;) right bottom no-repeat,</div><div class="line">        url(&quot;images/bg4.png&quot;) left bottom no-repeat,</div><div class="line">        url(&quot;images/bg5.png&quot;) center center no-repeat;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="渐变"><a href="#渐变" class="headerlink" title="渐变"></a>渐变</h3><ul>
<li><p>linear-gradient() 线性渐变<br>  1,渐变方向.0deg 的方向是朝上  正的角度是顺时针  负的角度是逆时针.<br>  2,起始颜色<br>  3,结束颜色<br>  <code>background-image: linear-gradient(90deg,yellow,blue);</code></p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/*渐变的区间可以用百分比来划分*/</div><div class="line">        background-image: linear-gradient(</div><div class="line">        45deg,</div><div class="line">        yellow,yellow 25%,</div><div class="line">        blue 25%,blue 50%,</div><div class="line">        yellow 50%,yellow 75%,</div><div class="line">        blue 75%,blue 100%</div><div class="line">        );</div></pre></td></tr></table></figure>
</li>
<li><p>radial-gradient 径向渐变<br>  1.扩散半径 单位px<br>  2.中心原点 top right left bottom center  还可以用坐标 单位也是px 坐标原点是盒子的左上角<br>  3.起始颜色<br>  4.结束颜色<br>  <code>background-image: radial-gradient(120px at 80px 80px,#fff,blue);</code></p>
</li>
</ul>
<h3 id="过渡"><a href="#过渡" class="headerlink" title="过渡"></a>过渡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">.transition &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 50px auto;</div><div class="line">    background-color: green;</div><div class="line"></div><div class="line">    /*1.需要过渡的属性*/</div><div class="line">    /*transition-property: all;*/</div><div class="line">    /*2.过渡执行的时间*/</div><div class="line">    /*transition-duration: 1s;*/</div><div class="line">    /*3.过渡的速度*/</div><div class="line">    /*transition-timing-function: ease;*/</div><div class="line">    /*4.过渡延时*/</div><div class="line">    /*transition-delay: 0s;*/</div><div class="line"></div><div class="line">    /*transition*/</div><div class="line">    /*transition:all 1s linear 0s;*/</div><div class="line"></div><div class="line">    transition: width 1s,height 1s linear 1s;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">.transition:hover &#123;</div><div class="line">    width: 400px;</div><div class="line">    height: 400px;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2D转换"><a href="#2D转换" class="headerlink" title="2D转换"></a>2D转换</h3><ul>
<li><p>scale 缩放</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">.scale &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 100px auto;</div><div class="line">    background-color: green;</div><div class="line">    transition: all 1s;</div><div class="line"></div><div class="line">    /*如果没有设置默认的是盒子的中心点*/</div><div class="line">    /*转换原点*/</div><div class="line">    transform-origin:  right top;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">.scale:hover &#123;</div><div class="line">    /*缩放*/</div><div class="line">    /*</div><div class="line">    1.x轴方向的缩放</div><div class="line">    2.y轴方向的缩放</div><div class="line"></div><div class="line">    比1大 放大</div><div class="line">    比1小 缩小</div><div class="line"></div><div class="line">    如果要等比缩放需要同时设置</div><div class="line">    */</div><div class="line">    transform: scale(0.5,0.5);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>translate 移动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">.translate &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 600px;</div><div class="line">    background-color: green;</div><div class="line">    position: absolute;</div><div class="line">    left: 200px;</div><div class="line">    top: 50px;</div><div class="line">    transition: all 1s linear;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.translate:hover &#123;</div><div class="line">    /*基于原来的位置做移动*/</div><div class="line">    /*translate*/</div><div class="line">    /*</div><div class="line">    1.x轴方向的位移</div><div class="line">    2.y轴方向的位移</div><div class="line">    */</div><div class="line">    /*位移当中的百分比的计算是基于盒子自身*/</div><div class="line">    /*任意元素居中*/</div><div class="line">    transform: translate(-100%,0);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>rotate 旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">.rotate &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 60px auto;</div><div class="line">    background-color: green;</div><div class="line">    transition: all 1s;</div><div class="line"></div><div class="line">    /*转化原点*/</div><div class="line">    transform-origin: left bottom;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotate:hover &#123;</div><div class="line">    /*rotate 旋转*/</div><div class="line">    /*旋转角度 单位 deg*/</div><div class="line">    /* 如果是正的  是顺时针旋转 */</div><div class="line">    /* 如果是负的  是逆时针旋转 */</div><div class="line">    transform: rotate(-90deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>skew 倾斜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">.skew &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 100px auto;</div><div class="line">    background-color: green;</div><div class="line">    border-width: 5px;</div><div class="line">    border-style: solid;</div><div class="line">    border-color: red pink blue yellow;</div><div class="line">    transition:all 1s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.skew:hover &#123;</div><div class="line">    /*skew  倾斜*/</div><div class="line">    /*</div><div class="line">    1.x轴方向的倾斜 当值正的时候是逆时针倾斜  否则相反</div><div class="line">    2.y轴方向的倾斜</div><div class="line">    */</div><div class="line">    /*最后使用单个方向的倾斜*/</div><div class="line">    transform: skew(45deg,0deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="3D转换"><a href="#3D转换" class="headerlink" title="3D转换"></a>3D转换</h3><ul>
<li><p>rotateX  绕 x 轴旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">.rotateX &#123;</div><div class="line">    height: 226px;</div><div class="line">    padding-top: 100px;</div><div class="line">    text-align: center;</div><div class="line">    /*透视属性*/ /*视距*/</div><div class="line">    /*辅助观察3d效果*/</div><div class="line">    perspective: 100px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateX img &#123;</div><div class="line">    transition: all 5s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateX:hover img &#123;</div><div class="line">    /*</div><div class="line">        1.需要朝着x轴的正方向看</div><div class="line">        2.当是逆时针旋转  是正角度</div><div class="line">        3.当是顺时针旋转  是负角度</div><div class="line">    */</div><div class="line"></div><div class="line">    transform: rotateX(-180deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>rotateY  绕 y 轴旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.rotateY &#123;</div><div class="line">    height: 226px;</div><div class="line">    padding-top: 100px;</div><div class="line">    text-align: center;</div><div class="line">    perspective: 100px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateY img &#123;</div><div class="line">    transition: all 5s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateY:hover img &#123;</div><div class="line">    /*</div><div class="line">        1.需要朝着y轴的正方向看</div><div class="line">        2.当是逆时针旋转  是正角度</div><div class="line">        3.当是顺时针旋转  是负角度</div><div class="line">    */</div><div class="line">    transform: rotateY(-180deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>rotateZ  绕 z 轴旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">.rotateZ &#123;</div><div class="line">    height: 226px;</div><div class="line">    padding-top: 100px;</div><div class="line">    text-align: center;</div><div class="line">    perspective: 100px;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateZ img &#123;</div><div class="line">    transition: all 5s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.rotateZ:hover img &#123;</div><div class="line">    /*</div><div class="line">        1.需要朝着Z轴的正方向看</div><div class="line">        2.当是逆时针旋转  是正角度</div><div class="line">        3.当是顺时针旋转  是负角度</div><div class="line">    */</div><div class="line">    transform:perspective(100px) rotateZ(-180deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>translateX  沿 x 轴移动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.translateX &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    background-color: green;</div><div class="line">    transition: all 1s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.translateX:hover &#123;</div><div class="line">    transform: perspective(100px) translateX(300px);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>translateY  沿 y 轴移动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.translateY &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    background-color: green;</div><div class="line">    transition: all 1s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.translateY:hover &#123;</div><div class="line">    transform: perspective(100px) translateY(300px);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>translateZ  沿 z 轴移动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.translateZ &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    background-color: green;</div><div class="line">    transition: all 1s;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.translateZ:hover &#123;</div><div class="line">    transform: perspective(100px) translateZ(300px);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>transform-style: preserve-3d; 透视效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">.preserve-3d &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    margin: 100px auto;</div><div class="line">    position: relative;</div><div class="line">    transform-style: preserve-3d;</div><div class="line">&#125;</div><div class="line">.rotateX &#123;</div><div class="line">    position: absolute;</div><div class="line">    left: 0;</div><div class="line">    top: 0;</div><div class="line">    width: 100%;</div><div class="line">    height: 100%;</div><div class="line">&#125;</div><div class="line">.rotateX:nth-child(1) &#123;</div><div class="line">    background-color: pink;</div><div class="line">&#125;</div><div class="line">.rotateX:nth-child(2) &#123;</div><div class="line">    background-color: blue;</div><div class="line">    transform: rotateX(45deg) skew(-45deg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">/*  a、通过@keyframes指定动画序列；</div><div class="line">    b、通过百分比将动画序列分割成多个节点；</div><div class="line">    c、在各节点中分别定义各属性</div><div class="line">    d、通过animation将动画应用于相应元素；</div><div class="line">*/</div><div class="line">@keyframes animationFuc &#123;</div><div class="line">    /*定义节点*/</div><div class="line">    /*from 0% to 100%*/</div><div class="line">    0%&#123;</div><div class="line">        transform: scale(1,1) rotate(0deg);</div><div class="line">    &#125;</div><div class="line">    25%&#123;</div><div class="line">        transform: scale(1.5,1.5) rotate(180deg);</div><div class="line">    &#125;</div><div class="line">    75%&#123;</div><div class="line">        transform: scale(1,1) rotate(0deg);</div><div class="line">    &#125;</div><div class="line">    100%&#123;</div><div class="line">        transform: scale(0.6,0.6) rotate(-270deg);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">.box &#123;</div><div class="line">    width: 200px;</div><div class="line">    height: 200px;</div><div class="line">    background-color: green;</div><div class="line"></div><div class="line">    /*加上动画*/</div><div class="line">    /*animation: animationFuc 2s;*/</div><div class="line"></div><div class="line">    /*动画序列名称*/</div><div class="line">    animation-name: animationFuc;</div><div class="line">    /*动画执行时间*/</div><div class="line">    animation-duration: 2s;</div><div class="line">    /*动画执行速度 ease*/</div><div class="line">    animation-timing-function: steps(3);/*特殊的速度  steps(3)*/</div><div class="line">    /*动画延时*/</div><div class="line">    animation-delay: 1s;</div><div class="line">    /*当动画结束之后逆向动画回去*/</div><div class="line">    animation-direction: alternate;</div><div class="line">    /*动画执行的次数 （注意：逆播放也算一次）*/</div><div class="line">    animation-iteration-count:1;</div><div class="line">    /*播放完成是要默认回到初始状态</div><div class="line">    forwards 保存动画结束的状态</div><div class="line">    backwards 回到初始状态 默认</div><div class="line">    */</div><div class="line">    animation-fill-mode: forwards;</div><div class="line">&#125;</div><div class="line"></div><div class="line">.box:hover&#123;</div><div class="line">    /*动画暂停或者执行 默认running、paused暂停*/</div><div class="line">    animation-play-state: paused;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/20/01-canvas-应用实例2/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/20/01-canvas-应用实例2/" itemprop="url">
                  HTML5-canvas-应用实例:模仿游戏中控制 NPC 的行走动画
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-20T23:47:33+08:00">
                2016-01-20
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="canvas-模仿游戏中控制-NPC-的行走动画"><a href="#canvas-模仿游戏中控制-NPC-的行走动画" class="headerlink" title="canvas 模仿游戏中控制 NPC 的行走动画"></a>canvas 模仿游戏中控制 NPC 的行走动画</h1><hr>
<p>动画也是 canvas 能够完成的功能,本次实现的模仿游戏中控制小人行走的动画功能.<br>直接上代码<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">style</span>=<span class="string">"border:1px solid red"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"500"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cvs = <span class="built_in">document</span>.querySelector(<span class="string">'canvas'</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cvs.getContext(<span class="string">'2d'</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 混入（也叫copy）</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params"> o1, o2 </span>) </span>&#123;</div><div class="line">        <span class="keyword">for</span>( <span class="keyword">var</span> key <span class="keyword">in</span> o2 ) &#123;</div><div class="line"></div><div class="line">            <span class="comment">// 如果是o2自己的属性，我再给你混入</span></div><div class="line">            <span class="keyword">if</span>( o2.hasOwnProperty( key ) ) &#123;</div><div class="line">                o1[ key ] = o2[ key ];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">    * constructor &#123; Person &#125; 人物构造函数</div><div class="line">    * param &#123; ctx: Context &#125; 绘图上下文</div><div class="line">    * param &#123; img: Image &#125; 小人的精灵图片</div><div class="line">    * param &#123; widthFrame: number &#125; 图片一排有多个帧(一个帧代表一个小人)</div><div class="line">    * param &#123; heightFrame: number &#125; 图片一列有多个帧(一个帧代表一个小人)</div><div class="line">    *</div><div class="line">    * */</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"> ctx, img, widthFrame, heightFrame </span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.ctx = ctx;</div><div class="line">        <span class="keyword">this</span>.img = img;</div><div class="line">        <span class="keyword">this</span>.widthFrame = widthFrame;</div><div class="line">        <span class="keyword">this</span>.heightFrame = heightFrame;</div><div class="line"></div><div class="line">        <span class="comment">// 小人默认的初始位置</span></div><div class="line">        <span class="keyword">this</span>.x = <span class="number">10</span>;</div><div class="line">        <span class="keyword">this</span>.y = <span class="number">10</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 小人的宽&amp;高</span></div><div class="line">        <span class="keyword">this</span>.width = <span class="keyword">this</span>.img.width / <span class="keyword">this</span>.widthFrame;</div><div class="line">        <span class="keyword">this</span>.height = <span class="keyword">this</span>.img.height / <span class="keyword">this</span>.heightFrame;</div><div class="line"></div><div class="line">        <span class="comment">// 小人行走的速度</span></div><div class="line">        <span class="keyword">this</span>.speed = <span class="number">5</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 控制小人某动作的第几帧</span></div><div class="line">        <span class="keyword">this</span>.i = <span class="number">0</span></div><div class="line">        <span class="comment">// 控制小人行走某个方向</span></div><div class="line">        <span class="keyword">this</span>.direction = <span class="number">0</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 监听键盘事件</span></div><div class="line">        <span class="keyword">this</span>.bind();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 给Person原型混入一些方法</span></div><div class="line">    extend( Person.prototype, &#123;</div><div class="line"></div><div class="line">        <span class="comment">// 绘制小人</span></div><div class="line">        draw: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.ctx.drawImage( <span class="keyword">this</span>.img,</div><div class="line">                <span class="keyword">this</span>.width * <span class="keyword">this</span>.i, <span class="keyword">this</span>.height * <span class="keyword">this</span>.direction, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height,</div><div class="line">                <span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.width, <span class="keyword">this</span>.height);</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 更新小人的数据</span></div><div class="line">        update: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="keyword">this</span>.i = ++<span class="keyword">this</span>.i % <span class="number">4</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 让小人根据方向行走，如果走出画布，从反方向出来</span></div><div class="line">            <span class="keyword">switch</span> ( <span class="keyword">this</span>.direction ) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// 向下走</span></div><div class="line">                <span class="keyword">case</span> <span class="number">0</span>:</div><div class="line">                    <span class="keyword">this</span>.y += <span class="keyword">this</span>.speed;</div><div class="line">                    <span class="keyword">this</span>.y = <span class="keyword">this</span>.y &gt; <span class="keyword">this</span>.ctx.canvas.height? -<span class="keyword">this</span>.height: <span class="keyword">this</span>.y;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                <span class="comment">// 向左走</span></div><div class="line">                <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">                    <span class="keyword">this</span>.x -= <span class="keyword">this</span>.speed;</div><div class="line">                    <span class="keyword">this</span>.x = <span class="keyword">this</span>.x &lt; -<span class="keyword">this</span>.width? <span class="keyword">this</span>.ctx.canvas.width : <span class="keyword">this</span>.x;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                <span class="comment">// 向右走</span></div><div class="line">                <span class="keyword">case</span> <span class="number">2</span>:</div><div class="line">                    <span class="keyword">this</span>.x += <span class="keyword">this</span>.speed;</div><div class="line">                    <span class="keyword">this</span>.x = <span class="keyword">this</span>.x &gt; <span class="keyword">this</span>.ctx.canvas.width? -<span class="keyword">this</span>.width: <span class="keyword">this</span>.x;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line"></div><div class="line">                <span class="comment">// 向上走</span></div><div class="line">                <span class="keyword">case</span> <span class="number">3</span>:</div><div class="line">                    <span class="keyword">this</span>.y -= <span class="keyword">this</span>.speed;</div><div class="line">                    <span class="keyword">this</span>.y = <span class="keyword">this</span>.y &lt; -<span class="keyword">this</span>.height? <span class="keyword">this</span>.ctx.canvas.height: <span class="keyword">this</span>.y;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="attr">bind</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 根据键盘的左上右下键修改小人行走的方向</span></div><div class="line">            <span class="built_in">document</span>.addEventListener( <span class="string">'keydown'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>) </span>&#123;</div><div class="line">                <span class="keyword">switch</span> ( e.keyCode ) &#123;</div><div class="line">                    <span class="keyword">case</span> <span class="number">37</span>:</div><div class="line">                        self.direction = <span class="number">1</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">38</span>:</div><div class="line">                        self.direction = <span class="number">3</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">39</span>:</div><div class="line">                        self.direction = <span class="number">2</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                    <span class="keyword">case</span> <span class="number">40</span>:</div><div class="line">                        self.direction = <span class="number">0</span>;</div><div class="line">                        <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line">            &#125; );</div><div class="line">        &#125;</div><div class="line">    &#125; );</div><div class="line"></div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    img.src = <span class="string">'./imgs/NPCrabbitbaby.png'</span>;</div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> person = <span class="keyword">new</span> Person( ctx, img, <span class="number">4</span>, <span class="number">4</span> );</div><div class="line"></div><div class="line">        setInterval( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">// 清除上一次绘制的小人</span></div><div class="line">            ctx.clearRect( <span class="number">0</span>, <span class="number">0</span>, cvs.width, cvs.height );</div><div class="line">            person.draw();</div><div class="line">            person.update();</div><div class="line">        &#125;, <span class="number">50</span>);</div><div class="line">    &#125;;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/19/01-HTML5-地理定位/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/19/01-HTML5-地理定位/" itemprop="url">
                  HTML5-地理定位
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-19T23:47:33+08:00">
                2016-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTML5-地理位置定位（HTML5-Geolocation）"><a href="#HTML5-地理位置定位（HTML5-Geolocation）" class="headerlink" title="HTML5 地理位置定位（HTML5 Geolocation）"></a>HTML5 地理位置定位（HTML5 Geolocation）</h1><hr>
<ul>
<li>简单介绍<ul>
<li>地理位置(Geolocation) 是 html5 的重要特性之一, 提供了确定用户位置的功能,      借助这个特性能够开发基于位置信息的应用.</li>
<li>鉴于该特性可能侵犯用户的隐私, 除非用户同意, 否则用户位置信息是不可用的.</li>
<li>浏览器支持: IE 9、Firefox、Chrome、Safari 以及 Opera 支持地理定位.</li>
</ul>
</li>
<li><p>简单使用</p>
<ul>
<li><p>getCurrentPosition() 方法获取用户的位置.</p>
<p>getCurrentPosition() 方法有两个参数:</p>
<ul>
<li>参数1: 获取位置成功的返回函数</li>
<li>参数2: 获取位置失败的返回函数<br>实例<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (navigator.geolocation) &#123;</div><div class="line">    navigator.geolocation.getCurrentPosition(showPosition);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> &#123; </div><div class="line">    navigator.geolocation.getCurrentPosition(showError);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPosition</span>(<span class="params">position</span>)</span></div><div class="line">  &#123; </div><div class="line">    <span class="comment">//结合谷歌地图 api 将定位位置在谷歌地图中显示</span></div><div class="line">    <span class="keyword">var</span> latlon=position.coords.latitude+<span class="string">","</span>+position.coords.longitude;</div><div class="line">    <span class="keyword">var</span> img_url=<span class="string">"http://maps.googleapis.com/maps/api/staticmap?center="</span></div><div class="line">    +latlon+<span class="string">"&amp;zoom=14&amp;size=400x300&amp;sensor=false"</span>;</div><div class="line"></div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">"mapholder"</span>).innerHTML=<span class="string">"&lt;img src='"</span>+img_url+<span class="string">" ' /&gt;"</span>;</div><div class="line">  &#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showError</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="keyword">switch</span>(error.code) &#123;</div><div class="line">        <span class="comment">//用户不允许地理定位</span></div><div class="line">      <span class="keyword">case</span> error.PERMISSION_DENIED:</div><div class="line">        x.innerHTML=<span class="string">"User denied the request for Geolocation."</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">        <span class="comment">//无法获取当前位置</span></div><div class="line">      <span class="keyword">case</span> error.POSITION_UNAVAILABLE:</div><div class="line">        x.innerHTML=<span class="string">"Location information is unavailable."</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">        <span class="comment">//操作超时</span></div><div class="line">      <span class="keyword">case</span> error.TIMEOUT:</div><div class="line">        x.innerHTML=<span class="string">"The request to get user location timed out."</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">      <span class="keyword">case</span> error.UNKNOWN_ERROR:</div><div class="line">        x.innerHTML=<span class="string">"An unknown error occurred."</span></div><div class="line">        <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>watchPosition() 返回用户的当前位置，并继续返回用户移动时的更新位置.<br>实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x=<span class="built_in">document</span>.getElementById(<span class="string">"demo"</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLocation</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (navigator.geolocation) &#123;</div><div class="line">    navigator.geolocation.watchPosition(showPosition);</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">else</span> &#123;x.innerHTML=<span class="string">"Geolocation is not supported by this browser."</span>;&#125;</div><div class="line">  &#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">showPosition</span>(<span class="params">position</span>) </span>&#123;</div><div class="line">  x.innerHTML=<span class="string">"Latitude: "</span> + position.coords.latitude +</div><div class="line">  <span class="string">"&lt;br /&gt;Longitude: "</span> + position.coords.longitude;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/19/01-canvas-应用实例1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/19/01-canvas-应用实例1/" itemprop="url">
                  HTML5-canvas-应用实例:折线图和饼图
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-19T23:47:33+08:00">
                2016-01-19
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="canvas-折线图和饼图的绘制"><a href="#canvas-折线图和饼图的绘制" class="headerlink" title="canvas 折线图和饼图的绘制"></a>canvas 折线图和饼图的绘制</h1><hr>
<p>在实际开发中,我们需要对数据进行展示,一般会用到 canvas 来绘制折线图和饼图.</p>
<p>以下是折线图和饼图的绘制:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lineChart.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"pipeChart.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">style</span>=<span class="string">"border: 1px solid red"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"500"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">style</span>=<span class="string">"border: 1px solid red"</span> <span class="attr">width</span>=<span class="string">"500"</span> <span class="attr">height</span>=<span class="string">"500"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"></div><div class="line">        <span class="comment">/*------------------------------测试折线图------------------------------*/</span></div><div class="line"></div><div class="line">        <span class="keyword">var</span> cvs = <span class="built_in">document</span>.querySelector(<span class="string">'canvas'</span>);</div><div class="line">        <span class="keyword">var</span> ctx = cvs.getContext(<span class="string">'2d'</span>);</div><div class="line"></div><div class="line">        <span class="comment">// 需求，把门口麻辣烫7天的销售额绘制成折线图</span></div><div class="line">        <span class="keyword">var</span> data = [ <span class="number">200</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">120</span>, <span class="number">150</span>, <span class="number">400</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">120</span>, <span class="number">150</span>, <span class="number">400</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">120</span>, <span class="number">150</span>, <span class="number">400</span>, <span class="number">200</span>, <span class="number">300</span>, <span class="number">50</span>, <span class="number">80</span>, <span class="number">120</span>, <span class="number">150</span>, <span class="number">400</span> ];</div><div class="line">        <span class="keyword">var</span> lineChart = <span class="keyword">new</span> LineChart( ctx, [ <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">20</span> ], [ <span class="number">10</span>, <span class="number">20</span> ], data );</div><div class="line">        lineChart.draw();</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">/*---------------------------测试饼图------------------------------------*/</span></div><div class="line">        <span class="keyword">var</span> cvs2 = <span class="built_in">document</span>.querySelectorAll(<span class="string">'canvas'</span>)[<span class="number">1</span>];</div><div class="line">        <span class="keyword">var</span> ctx2 = cvs2.getContext(<span class="string">'2d'</span>);</div><div class="line"></div><div class="line">        <span class="keyword">var</span> data = [</div><div class="line">            &#123; <span class="attr">val</span>: <span class="number">100</span>, <span class="attr">msg</span>: <span class="string">'喜欢女生'</span> &#125;, &#123; <span class="attr">val</span>: <span class="number">100</span>, <span class="attr">msg</span>: <span class="string">'喜欢男生'</span> &#125;, &#123; <span class="attr">val</span>: <span class="number">200</span>, <span class="attr">msg</span>: <span class="string">'都喜欢的'</span> &#125;, &#123; <span class="attr">val</span>: <span class="number">150</span>, <span class="attr">msg</span>: <span class="string">'喜欢同性'</span> &#125;</div><div class="line">        ];</div><div class="line">        <span class="keyword">var</span> pipeChart = <span class="keyword">new</span> PipeChart(ctx2, data, <span class="number">200</span>, <span class="number">200</span>, <span class="number">80</span>);</div><div class="line">        pipeChart.draw();</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>对折线图进行封装的 js 代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> w </span>) </span>&#123;</div><div class="line">    <span class="comment">/*</span></div><div class="line">     * constructor &#123; LineChart &#125; 折线图构造函数</div><div class="line">     * param &#123; ctx: Context &#125; 绘图上下文</div><div class="line">     * param &#123; paddingArr: Array &#125; 折线图到画布四边的距离，存储顺序为上右下左</div><div class="line">     * param &#123; arrowArr: Array &#125; 折线图中箭头的宽和高</div><div class="line">     * param &#123; data: Array &#125; 存储了折线图中所需的数据</div><div class="line">     * */</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">LineChart</span>(<span class="params"> ctx, paddingArr, arrowArr, data </span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.ctx = ctx;</div><div class="line">        <span class="keyword">this</span>.paddingArr = paddingArr;</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.arrowArr = arrowArr;</div><div class="line">        <span class="keyword">this</span>.arrowWidth = <span class="keyword">this</span>.arrowArr[<span class="number">0</span>];</div><div class="line">        <span class="keyword">this</span>.arrowHeight = <span class="keyword">this</span>.arrowArr[<span class="number">1</span>];</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.data = data;</div><div class="line"></div><div class="line">        <span class="comment">// 计算上顶点的坐标</span></div><div class="line">        <span class="keyword">this</span>.vertexTop = &#123;</div><div class="line">            <span class="attr">x</span>: <span class="keyword">this</span>.paddingArr[ <span class="number">3</span> ],</div><div class="line">            <span class="attr">y</span>: <span class="keyword">this</span>.paddingArr[ <span class="number">0</span> ]</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">// 计算原点的坐标</span></div><div class="line">        <span class="keyword">this</span>.origin = &#123;</div><div class="line">            <span class="attr">x</span>: <span class="keyword">this</span>.paddingArr[ <span class="number">3</span> ],</div><div class="line">            <span class="attr">y</span>: <span class="keyword">this</span>.ctx.canvas.height - <span class="keyword">this</span>.paddingArr[ <span class="number">2</span> ]</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">// 计算右顶点的坐标</span></div><div class="line">        <span class="keyword">this</span>.vertexRight = &#123;</div><div class="line">            <span class="attr">x</span>: <span class="keyword">this</span>.ctx.canvas.width - <span class="keyword">this</span>.paddingArr[ <span class="number">1</span> ],</div><div class="line">            <span class="attr">y</span>: <span class="keyword">this</span>.ctx.canvas.height - <span class="keyword">this</span>.paddingArr[ <span class="number">2</span> ]</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">        <span class="comment">// 根据数据得到对应的坐标</span></div><div class="line">        <span class="keyword">this</span>.processData();</div><div class="line">    &#125;</div><div class="line"></div><div class="line"><span class="comment">// 置换原型</span></div><div class="line">    LineChart.prototype = &#123;</div><div class="line"></div><div class="line">        <span class="attr">constructor</span>: LineChart,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制折线图</span></div><div class="line">        draw: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.drawCoordinate();</div><div class="line">            <span class="keyword">this</span>.drawArrow();</div><div class="line">            <span class="keyword">this</span>.drawPoint();</div><div class="line">            <span class="keyword">this</span>.drawLine();</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制坐标轴中的两条线</span></div><div class="line">        drawCoordinate: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">            <span class="keyword">this</span>.ctx.moveTo( <span class="keyword">this</span>.vertexTop.x, <span class="keyword">this</span>.vertexTop.y );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.origin.x, <span class="keyword">this</span>.origin.y );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexRight.x, <span class="keyword">this</span>.vertexRight.y );</div><div class="line">            <span class="keyword">this</span>.ctx.stroke();</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制坐标轴中的两个箭头</span></div><div class="line">        drawArrow: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="comment">// 先绘制上面箭头</span></div><div class="line">            <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">            <span class="keyword">this</span>.ctx.moveTo( <span class="keyword">this</span>.vertexTop.x, <span class="keyword">this</span>.vertexTop.y );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexTop.x - <span class="keyword">this</span>.arrowWidth / <span class="number">2</span>, <span class="keyword">this</span>.vertexTop.y + <span class="keyword">this</span>.arrowHeight );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexTop.x, <span class="keyword">this</span>.vertexTop.y + <span class="keyword">this</span>.arrowHeight / <span class="number">2</span> );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexTop.x + <span class="keyword">this</span>.arrowWidth / <span class="number">2</span>, <span class="keyword">this</span>.vertexTop.y + <span class="keyword">this</span>.arrowHeight );</div><div class="line">            <span class="keyword">this</span>.ctx.closePath();</div><div class="line">            <span class="keyword">this</span>.ctx.stroke();</div><div class="line"></div><div class="line">            <span class="comment">// 再绘制右面箭头</span></div><div class="line">            <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">            <span class="keyword">this</span>.ctx.moveTo( <span class="keyword">this</span>.vertexRight.x, <span class="keyword">this</span>.vertexRight.y );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexRight.x - <span class="keyword">this</span>.arrowHeight, <span class="keyword">this</span>.vertexRight.y - <span class="keyword">this</span>.arrowWidth / <span class="number">2</span> );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexRight.x - <span class="keyword">this</span>.arrowHeight / <span class="number">2</span>, <span class="keyword">this</span>.vertexRight.y );</div><div class="line">            <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.vertexRight.x - <span class="keyword">this</span>.arrowHeight, <span class="keyword">this</span>.vertexRight.y + <span class="keyword">this</span>.arrowWidth / <span class="number">2</span> );</div><div class="line">            <span class="keyword">this</span>.ctx.closePath();</div><div class="line">            <span class="keyword">this</span>.ctx.stroke();</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 把传入进来的数据转化为对应画布的坐标</span></div><div class="line">        processData: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="comment">// 计算x轴可表示的刻度范围</span></div><div class="line">            <span class="keyword">this</span>.rangeX = <span class="keyword">this</span>.ctx.canvas.width - <span class="keyword">this</span>.paddingArr[<span class="number">3</span>] - <span class="keyword">this</span>.paddingArr[<span class="number">1</span>] - <span class="keyword">this</span>.arrowArr[<span class="number">1</span>];</div><div class="line">            <span class="comment">// 计算单位数据占用多少x轴</span></div><div class="line">            <span class="keyword">this</span>.unitX = <span class="keyword">this</span>.rangeX / (<span class="keyword">this</span>.data.length - <span class="number">1</span>);</div><div class="line"></div><div class="line">            <span class="comment">// 计算y轴可表示的刻度范围</span></div><div class="line">            <span class="keyword">this</span>.rangeY = <span class="keyword">this</span>.ctx.canvas.height - <span class="keyword">this</span>.paddingArr[<span class="number">0</span>] - <span class="keyword">this</span>.paddingArr[<span class="number">2</span>] - <span class="keyword">this</span>.arrowArr[<span class="number">1</span>];</div><div class="line">            <span class="comment">// 计算单位数据占用多少y轴</span></div><div class="line">            <span class="keyword">this</span>.unitY = <span class="keyword">this</span>.rangeY / <span class="built_in">Math</span>.max.apply( <span class="literal">null</span>, <span class="keyword">this</span>.data );</div><div class="line"></div><div class="line">            <span class="comment">// 用来存储转换后的坐标数据</span></div><div class="line">            <span class="keyword">this</span>.processArr = [];</div><div class="line"></div><div class="line">            <span class="comment">// 遍历所有的数据，依次转换为对应的坐标</span></div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.data.length; i &lt; len; i++ ) &#123;</div><div class="line">                <span class="comment">/*</span></div><div class="line">                 * 数据转化为相当于画布的坐标：</div><div class="line">                 * canvasX = this.origin.x + this.unitX * i</div><div class="line">                 * canvasY = this.origin.y - this.unitY * y</div><div class="line">                 * */</div><div class="line">                <span class="keyword">this</span>.processArr.push( <span class="keyword">this</span>.origin.x + <span class="keyword">this</span>.unitX * i );</div><div class="line">                <span class="keyword">this</span>.processArr.push( <span class="keyword">this</span>.origin.y - <span class="keyword">this</span>.unitY * <span class="keyword">this</span>.data[ i ] );</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 根据数据绘制相应的点</span></div><div class="line">        drawPoint: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> r = <span class="number">4</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 遍历所有的坐标，依次绘制点</span></div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.processArr.length; i &lt; len; i+=<span class="number">2</span> ) &#123;</div><div class="line">                <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">                <span class="keyword">this</span>.ctx.arc( <span class="keyword">this</span>.processArr[ i ], <span class="keyword">this</span>.processArr[ i + <span class="number">1</span> ], r, <span class="number">0</span>, <span class="built_in">Math</span>.PI*<span class="number">2</span> );</div><div class="line">                <span class="keyword">this</span>.ctx.fill();</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 根据数据绘制折线</span></div><div class="line">        drawLine: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.processArr.length; i &lt; len; i+=<span class="number">2</span> ) &#123;</div><div class="line">                <span class="keyword">this</span>.ctx.lineTo( <span class="keyword">this</span>.processArr[ i ], <span class="keyword">this</span>.processArr[ i + <span class="number">1</span> ] );</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">this</span>.ctx.stroke();</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    w.LineChart = LineChart;</div><div class="line">&#125;( <span class="built_in">window</span> ));</div></pre></td></tr></table></figure></p>
<p>对饼图绘制进行封装的 js 代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> w </span>) </span>&#123;</div><div class="line">    <span class="comment">// 角度转换为弧度</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">angleToRadian</span>(<span class="params"> angle </span>) </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="built_in">Math</span>.PI / <span class="number">180</span> * angle;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">     * constructor &#123; PipeChart &#125; 饼图构造函数</div><div class="line">     * param &#123; ctx: Context &#125; 绘图上下文</div><div class="line">     * param &#123; data: Array &#125; 绘制饼图所需的数据</div><div class="line">     * param &#123; x: number &#125; 圆心x坐标</div><div class="line">     * param &#123; y: number &#125; 圆心y坐标</div><div class="line">     * param &#123; r: number &#125; 饼图半径</div><div class="line">     * */</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">PipeChart</span>(<span class="params"> ctx, data, x, y, r </span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">this</span>.ctx = ctx;</div><div class="line">        <span class="keyword">this</span>.data = data;</div><div class="line">        <span class="keyword">this</span>.x = x;</div><div class="line">        <span class="keyword">this</span>.y = y;</div><div class="line">        <span class="keyword">this</span>.r = r;</div><div class="line"></div><div class="line">        <span class="comment">// 文字衬托线到圆的距离</span></div><div class="line">        <span class="keyword">this</span>.lineSpace = <span class="number">20</span>;</div><div class="line"></div><div class="line">        <span class="comment">// 扇形和文字的杨色</span></div><div class="line">        <span class="keyword">this</span>.colors = <span class="string">'blue,hotpink,green,deeppink,ivory,skyblue,lavender,lavenderblush'</span>.split(<span class="string">','</span>);</div><div class="line"></div><div class="line">        <span class="comment">// 把数据转换为对应的角度</span></div><div class="line">        <span class="keyword">this</span>.processData();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// 置换原型</span></div><div class="line">    PipeChart.prototype = &#123;</div><div class="line"></div><div class="line">        <span class="attr">constructor</span>: PipeChart,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制饼图</span></div><div class="line">        draw: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.drawPipe();</div><div class="line">            <span class="keyword">this</span>.drawText();</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 根据数据转换成对应的角度</span></div><div class="line">        processData: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="comment">/*</span></div><div class="line">             * 实现思路：</div><div class="line">             * 1、求单位数据所占用的角度 ==&gt; 360 / 数据总和</div><div class="line">             * 2、使用单位数据所占用角度 * 每一份数据值得到每一份数据所占用的角度</div><div class="line">             * 3、把计算好的角度使用一个数据存储起来，供其他方法使用</div><div class="line">             * */</div><div class="line">            <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 求数据总和</span></div><div class="line">            <span class="keyword">var</span> num = <span class="number">0</span>;</div><div class="line">            <span class="keyword">this</span>.data.forEach( <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</div><div class="line">                num += obj.val;</div><div class="line">            &#125;);</div><div class="line"></div><div class="line">            <span class="comment">// 求单位数据所占用的角度</span></div><div class="line">            <span class="keyword">var</span> unitAngle = <span class="number">360</span> / num;</div><div class="line"></div><div class="line">            <span class="comment">// 用来存储数据所占用饼图的角度</span></div><div class="line">            <span class="keyword">this</span>.processArr = [];</div><div class="line"></div><div class="line">            <span class="keyword">this</span>.data.forEach( <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</div><div class="line">                <span class="comment">// 这里的this不是饼图实例，所以使用self</span></div><div class="line">                self.processArr.push( unitAngle * obj.val );</div><div class="line">            &#125;);</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制饼中的扇</span></div><div class="line">        drawPipe: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="comment">// 扇形默认起点和结束点</span></div><div class="line">            <span class="keyword">var</span> startAngle = <span class="number">0</span>;</div><div class="line">            <span class="keyword">var</span> endAngle = <span class="number">0</span>;</div><div class="line"></div><div class="line">            <span class="comment">/*</span></div><div class="line">             * 实现思路：</div><div class="line">             * 1、遍历所有计算好的角度</div><div class="line">             * 2、beginPath、moveTo到饼图圆心</div><div class="line">             * 3、画对应扇形的弧</div><div class="line">             * 3.1、弧的起点位置 = 上一个弧的结束点</div><div class="line">             * 3.2、弧的结束点位置 = 上一个弧的结束点 + 自己的角度</div><div class="line">             * 4、closePath</div><div class="line">             * 5、修改填充色</div><div class="line">             * 6、fill</div><div class="line">             * */</div><div class="line"></div><div class="line">            <span class="comment">// 遍历所有计算好的角度，绘制成不同颜色的扇形</span></div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.processArr.length; i &lt; len; i++ ) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// 当前扇形弧的起点位置 = 上一个扇形弧的结束点</span></div><div class="line">                <span class="comment">// 当前扇形弧的结束点位置 = 上一个扇形弧的结束点 + 自己扇形所占用的角度</span></div><div class="line">                startAngle = endAngle;</div><div class="line">                endAngle = endAngle + <span class="keyword">this</span>.processArr[i];</div><div class="line"></div><div class="line">                <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">                <span class="keyword">this</span>.ctx.moveTo( <span class="keyword">this</span>.x, <span class="keyword">this</span>.y );</div><div class="line">                <span class="keyword">this</span>.ctx.arc( <span class="keyword">this</span>.x, <span class="keyword">this</span>.y, <span class="keyword">this</span>.r, angleToRadian( startAngle ), angleToRadian( endAngle ) );</div><div class="line">                <span class="keyword">this</span>.ctx.closePath();</div><div class="line">                <span class="keyword">this</span>.ctx.fillStyle = <span class="keyword">this</span>.colors[ i ];</div><div class="line">                <span class="keyword">this</span>.ctx.fill();</div><div class="line">            &#125;</div><div class="line">        &#125;,</div><div class="line"></div><div class="line">        <span class="comment">// 绘制文字</span></div><div class="line">        drawText: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line"></div><div class="line">            <span class="comment">// 扇形默认起点和结束点</span></div><div class="line">            <span class="keyword">var</span> startAngle = <span class="number">0</span>;</div><div class="line">            <span class="keyword">var</span> endAngle = <span class="number">0</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 扇形平分线的角度</span></div><div class="line">            <span class="keyword">var</span> lineAngle = <span class="number">0</span>;</div><div class="line">            <span class="keyword">var</span> lineX = <span class="number">0</span>;</div><div class="line">            <span class="keyword">var</span> lineY = <span class="number">0</span>;</div><div class="line"></div><div class="line">            <span class="comment">// 遍历所有计算好的角度，绘制成不同颜色的扇形</span></div><div class="line">            <span class="keyword">for</span>( <span class="keyword">var</span> i = <span class="number">0</span>, len = <span class="keyword">this</span>.processArr.length; i &lt; len; i++ ) &#123;</div><div class="line"></div><div class="line">                <span class="comment">// 当前扇形弧的起点位置 = 上一个扇形弧的结束点</span></div><div class="line">                <span class="comment">// 当前扇形弧的结束点位置 = 上一个扇形弧的结束点 + 自己扇形所占用的角度</span></div><div class="line">                startAngle = endAngle;</div><div class="line">                lineAngle = startAngle + <span class="keyword">this</span>.processArr[i] / <span class="number">2</span>;</div><div class="line">                endAngle = endAngle + <span class="keyword">this</span>.processArr[i];</div><div class="line"></div><div class="line">                <span class="comment">/*</span></div><div class="line">                 * 求平分线的x&amp;y坐标</div><div class="line">                 * x: 圆心x + r * Math.cos( angleToRadian(45) )</div><div class="line">                 * y: 圆心y +  r * Math.sin( angleToRadian(45) )</div><div class="line">                 * */</div><div class="line">                lineX = <span class="keyword">this</span>.x + (<span class="keyword">this</span>.r + <span class="keyword">this</span>.lineSpace) * <span class="built_in">Math</span>.cos( angleToRadian(lineAngle) );</div><div class="line">                lineY = <span class="keyword">this</span>.y + (<span class="keyword">this</span>.r + <span class="keyword">this</span>.lineSpace) * <span class="built_in">Math</span>.sin( angleToRadian(lineAngle) );</div><div class="line"></div><div class="line">                <span class="comment">// 画扇形平分线</span></div><div class="line">                <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">                <span class="keyword">this</span>.ctx.moveTo( <span class="keyword">this</span>.x, <span class="keyword">this</span>.y );</div><div class="line">                <span class="keyword">this</span>.ctx.lineTo( lineX, lineY );</div><div class="line">                <span class="keyword">this</span>.ctx.strokeStyle = <span class="keyword">this</span>.colors[i];</div><div class="line">                <span class="keyword">this</span>.ctx.stroke();</div><div class="line"></div><div class="line">                <span class="comment">// 添加文字描述</span></div><div class="line">                <span class="keyword">if</span>( lineAngle &gt;= <span class="number">90</span> &amp; lineAngle &lt;= <span class="number">270</span> ) &#123;</div><div class="line">                    <span class="keyword">this</span>.ctx.textAlign = <span class="string">'right'</span>;</div><div class="line">                    <span class="keyword">this</span>.ctx.moveTo( lineX, lineY );</div><div class="line">                    <span class="keyword">this</span>.ctx.lineTo( lineX - <span class="keyword">this</span>.ctx.measureText( <span class="keyword">this</span>.data[i].msg ).width, lineY );</div><div class="line">                &#125;<span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">this</span>.ctx.textAlign = <span class="string">'left'</span>;</div><div class="line">                    <span class="keyword">this</span>.ctx.moveTo( lineX, lineY );</div><div class="line">                    <span class="keyword">this</span>.ctx.lineTo( lineX + <span class="keyword">this</span>.ctx.measureText( <span class="keyword">this</span>.data[i].msg ).width, lineY );</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">this</span>.ctx.textBaseline = <span class="string">'bottom'</span>;</div><div class="line">                <span class="keyword">this</span>.ctx.fillStyle = <span class="keyword">this</span>.colors[i];</div><div class="line">                <span class="keyword">this</span>.ctx.fillText( <span class="keyword">this</span>.data[i].msg, lineX, lineY - <span class="number">5</span> );</div><div class="line">                <span class="keyword">this</span>.ctx.stroke();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    w.PipeChart = PipeChart;</div><div class="line">&#125;( <span class="built_in">window</span> ));</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/18/01-HTML5-canvas/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/18/01-HTML5-canvas/" itemprop="url">
                  HTML5-canvas基本使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-18T23:47:33+08:00">
                2016-01-18
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="canvas-基本使用"><a href="#canvas-基本使用" class="headerlink" title="canvas 基本使用"></a>canvas 基本使用</h1><hr>
<h3 id="canvas-简单介绍"><a href="#canvas-简单介绍" class="headerlink" title="canvas 简单介绍"></a>canvas 简单介绍</h3><ul>
<li>canvas 是HTML5新标签,像所有的 dom 对象一样有它自身的属性 方法和事件, 其中就有绘图的方法,js 能够调用它来进行绘图.</li>
<li>使用领域: 小游戏, 数据可视化. </li>
</ul>
<h3 id="canvas-简单使用"><a href="#canvas-简单使用" class="headerlink" title="canvas 简单使用"></a>canvas 简单使用</h3><ul>
<li><p>获取绘图环境<br>  canvas.getContext(‘2d’ || ‘webgl’)</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> cvs = <span class="built_in">document</span>.querySelector(<span class="string">'canvas'</span>)</div><div class="line"><span class="keyword">var</span> ctx = cvs.getContext(<span class="string">'2d'</span>)</div></pre></td></tr></table></figure>
</li>
<li><p>设置画布大小<br> canvas 默认画布大小为300*150<br> canvas 对象有 width 和 height 属性可以动态设置画布大小<br> 注意: 绘图过程中动态设置画布大小会清除画布内容</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> cvs = <span class="built_in">document</span>.querySelector(<span class="string">'canvas'</span>)</div><div class="line">cvs.width = <span class="number">500</span></div><div class="line">cvs.height = <span class="number">500</span></div></pre></td></tr></table></figure>
</li>
<li><p>开始绘制</p>
<ul>
<li>方法<ul>
<li>moveTo(X, Y):设置图形的起始坐标</li>
<li>lineTo(X, Y):绘制图形的路径(之前没有任何路径和路径的起点，那么第一个lineTo就相当于是moveTo)</li>
<li>stroke():对路径进行描边</li>
<li>fill():对图形进行填充</li>
<li>beginPath():清除路径</li>
<li>closePath():闭合路径</li>
<li>clearRect( beginX, beginY, rangeWidth, rangeHeight):清除画布</li>
<li>rect( beginX, beginY, rangeWidth, rangeHeight):绘制矩形路径</li>
<li>strokeRect( beginX, beginY, rangeWidth, rangeHeight):绘制描边矩形</li>
<li>fillRect( beginX, beginY, rangeWidth, rangeHeight):绘制填充矩形</li>
<li>setLineDash(排列数组):设置虚线样式</li>
<li>getLineDash():获取虚线样式</li>
<li>arc(圆心x轴坐标，圆心y轴坐标，半径，弧的起始位置，弧的结束位置，是否逆时针画):画弧路径</li>
<li>strokeText( ‘要绘制的文字’, x轴坐标，y轴坐标，限制文字绘制时占用的最大长度(可选)):绘制描边文字</li>
<li>fillText( ‘要绘制的文字’, x轴坐标，y轴坐标，限制文字绘制时占用的最大长度(可选)):绘制填充文字</li>
<li>measureText(‘被测量的文字’):预测文字</li>
<li>drawImage( ‘图像资源’, ‘裁剪的起点 x 轴坐标’, ‘裁剪的起点 y 轴坐标’, ‘裁剪多宽’, ‘裁剪多高’, ‘x 轴坐标’, ‘y 轴坐标’, ‘指定绘制图像的宽度’, ‘指定绘制图像的高度’ ):绘制图像<br>  有三个版本:1-三个参数,把指定图像绘制到指定位置上. 2-五个参数,把指定的图像按照指定的大小绘制到指定位置上. 3-九个参数,把裁剪的图像按照指定的大小绘制到指定位置上.</li>
<li>translate(‘x轴平移多少’, ‘y轴平移多少’):平移<br>  平移的是坐标系,平移会累加,平移不会影响之前绘制的内容.</li>
<li>rotate(‘旋转了多少弧度’):旋转<br>  旋转的是坐标系,旋转会累加,旋转不会影响之前绘制的内容.</li>
<li>scale(‘x轴缩放多少倍’, ‘y轴缩放多少倍’):缩放<br>  缩放是按照同样的坐标系绘制</li>
<li>save(): 状态保存</li>
<li>restore():状态回滚</li>
</ul>
</li>
<li>属性<ul>
<li>strokeStyle:描边样式</li>
<li>fillStyle:填充样式</li>
<li>lineWidth:线宽</li>
<li>lineCap:线帽样式<br>  <code>ctx.lineCap = &#39;butt&#39; || &#39;round&#39; || &#39;square&#39;</code></li>
<li>lineJion:交点样式<br>  <code>ctx.lineJoin = &#39;miter&#39; || &#39;round&#39; || &#39;bevel&#39;</code> </li>
<li>miterLimit:箭头长度(该属性只在lineJoin为miter的时候有效)</li>
<li>font:设置文字样式<br>  <code>ctx.font = &#39;900 2rem 微软雅黑&#39;</code></li>
<li>textAlign:设置文字水平对齐方式<br>  <code>ctx.textAlign = &#39;left start&#39; || &#39;center&#39; || &#39;right end&#39;</code>        </li>
<li>textBaseLine:设置文字垂直对齐方式<br>  <code>ctx.textBaseLine = &#39;top&#39; || &#39;middle&#39; || &#39;bottom&#39; || &#39;alphabetic&#39; || &#39;hanging&#39; || &#39;ideographic&#39;</code> </li>
</ul>
</li>
<li>非零环绕原则<br>  作用:用来判断路径围起来的图形,是在路径内,还是路径外.<br>  原理:在路径包含的区域内随便找一点,向外发送一条线,让该线贯穿所有围绕该点的路径,开始一个计数器,初始值为0,遇到顺时针围绕该点的路径+1,反之-1,最终结果如果不是0,则这块区域在该路径内.</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/17/01-H5视频播放器/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/17/01-H5视频播放器/" itemprop="url">
                  用 H5 实现一个简单的视频播放器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-17T23:47:33+08:00">
                2016-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在实际开发中一般不会使用 video 标签自带的播放控件,因为各个浏览器对该控件的显示效果不一样,另外我们写的播放器也要跟页面的 UI 布局相协调,所以需要我们根据实际需求,对 video 元素进行视觉上的优化.</p>
<p>以下是一个功能相对完整的 h5 播放器:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>视频播放器<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/font-awesome.css"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./css/player.css"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">figure</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>视频播放器<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"player"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"./video/fun.mp4"</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"controls"</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 播放/暂停 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"switch fa fa-play"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 全屏 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"expand fa fa-expand"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 进度条 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"progress"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loaded"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"line"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 时间 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"timer"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"current"</span>&gt;</span>00:00:00<span class="tag">&lt;/<span class="name">span</span>&gt;</span> /</div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"total"</span>&gt;</span>00:00:00<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 声音 --&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">figure</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./js/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line"></div><div class="line">        // 初始化</div><div class="line">        var video = $('video')[0],</div><div class="line">            // 播放进度条</div><div class="line">            line = $('.line'),</div><div class="line">            // 当前时间</div><div class="line">            current = $('.current'),</div><div class="line">            // 时分秒</div><div class="line">            h, m, s;</div><div class="line"></div><div class="line">        // 当视频可以播放时</div><div class="line">        video.oncanplay = function () &#123;</div><div class="line">            video.style.display = 'block';</div><div class="line">            </div><div class="line">            h = Math.floor(video.duration / 3600)</div><div class="line">            m = Math.floor(video.duration / 60);</div><div class="line">            s = Math.floor(video.duration % 60);</div><div class="line"></div><div class="line">            // 小于10时拼接字符串0</div><div class="line">            h = h &lt; 10 ? '0' + h : h;</div><div class="line">            m = m &lt; 10 ? '0' + m : m;</div><div class="line">            s = s &lt; 10 ? '0' + s : s;</div><div class="line"></div><div class="line">            // 总共多少时间</div><div class="line">            $('.total').text(h + ':' + m + ':' + s);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // 播放/暂停</div><div class="line">        $('.switch').on('click', function () &#123;</div><div class="line">            // 切换状态</div><div class="line">            $(this).toggleClass('fa-pause fa-play');</div><div class="line"></div><div class="line">            // 切换状态</div><div class="line">            if(video.paused) &#123;</div><div class="line">                video.play();</div><div class="line">            &#125; else &#123;</div><div class="line">                video.pause();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        // 播放进度</div><div class="line">        video.ontimeupdate = function () &#123;</div><div class="line"></div><div class="line">            var value = 0;</div><div class="line"></div><div class="line">            if (video.currentTime &gt; 0) &#123;</div><div class="line">                value = video.currentTime / video.duration * 100;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            line.css('width', value + '%');</div><div class="line"></div><div class="line">            h = Math.floor(video.currentTime / 3600)</div><div class="line">            m = Math.floor(video.currentTime / 60);</div><div class="line">            s = Math.floor(video.currentTime % 60);</div><div class="line"></div><div class="line">            // 小于10时拼接字符串0</div><div class="line">            h = h &lt; 10 ? '0' + h : h;</div><div class="line">            m = m &lt; 10 ? '0' + m : m;</div><div class="line">            s = s &lt; 10 ? '0' + s : s;</div><div class="line"></div><div class="line">            // 时间进度</div><div class="line">            current.text(h + ':' + m + ':' + s);</div><div class="line"></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // 跳跃播放</div><div class="line">        $('.bar').on('click', function (ev) &#123;</div><div class="line">            video.currentTime = (ev.offsetX / $(this).width()) * video.duration;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        // 播放完毕</div><div class="line">        video.onended = function () &#123;</div><div class="line">            // 切换状态</div><div class="line">            $('.switch').removeClass('fa-pause').addClass('fa-play');</div><div class="line">            // 进度条为0</div><div class="line">            line.css('width', 0);</div><div class="line">            // 时间还原</div><div class="line">            current.text('00:00:00');</div><div class="line"></div><div class="line">            // 播放时间还原</div><div class="line">            video.currentTime = 0;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // 全屏</div><div class="line">        $('.expand').on('click', function () &#123;</div><div class="line">            video.webkitRequestFullScreen();</div><div class="line">        &#125;);</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/16/01-HTML5-多媒体/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/16/01-HTML5-多媒体/" itemprop="url">
                  HTML5-多媒体
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-16T23:47:33+08:00">
                2016-01-16
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多媒体"><a href="#多媒体" class="headerlink" title="多媒体"></a>多媒体</h1><hr>
<h3 id="音频-audio元素"><a href="#音频-audio元素" class="headerlink" title="音频 audio元素"></a>音频 audio元素</h3><ul>
<li><p>audio 的使用<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">"song.ogg"</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span></div><div class="line">    您的浏览器不支持此音频</div><div class="line">    <span class="comment">&lt;!-- &lt;audio&gt; 与 &lt;/audio&gt; 之间插入的内容是供不支持 audio 元素的浏览器显示的. --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div></pre></td></tr></table></figure>
<p>  audio 元素支持三种音频格式:Ogg Vorbis, MP3, Wav.每种格式对各个浏览器的兼容性不同.<br>  audio 元素允许多个 source 元素.<br>  source 元素可以链接不同的音频文件.<br>  浏览器将使用第一个可识别的格式.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"song.ogg"</span> <span class="attr">type</span>=<span class="string">"audio/ogg"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">src</span>=<span class="string">"song.mp3"</span> <span class="attr">type</span>=<span class="string">"audio/mpeg"</span> /&gt;</span></div><div class="line">    您的浏览器不支持此音频</div><div class="line"><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>audio 的属性<br>  | 属性 | 值 | 描述 |<br>  | —- | —- | —- |<br>  | autoplay | autoplay | 自动播放 |<br>  | controls | controls | 显示音频控件 |<br>  | loop | loop | 循环播放 |<br>  | preload | preload | 页面加载时进行加载,并预备播放,使用 autoplay 会忽视该属性 |<br>  | src | url | 音频的 url |</p>
</li>
</ul>
<h3 id="视频-video-元素"><a href="#视频-video-元素" class="headerlink" title="视频 video 元素"></a>视频 video 元素</h3><ul>
<li>video 的介绍<ul>
<li>使用方法跟 audio 类似</li>
<li>不同之处<br>  支持视频格式: Ogg, MPEG4, WebM.<br>  比 audio 多了 width 和 height 两个属性</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/15/01-HTML5-表单/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/15/01-HTML5-表单/" itemprop="url">
                  HTML5-表单
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-15T23:47:33+08:00">
                2016-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="表单"><a href="#表单" class="headerlink" title="表单"></a>表单</h1><hr>
<h3 id="输入类型"><a href="#输入类型" class="headerlink" title="输入类型"></a>输入类型</h3><ul>
<li><p>email<br>  email 类型用于应该包含 e-mail 地址的输入域.<br>  在提交表单时，会自动验证 email 域的值.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"user_email"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>url<br>  url类型用于应该包含 URL 地址的输入域.<br>  在提交表单时,会自动验证 url 域的值.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Homepage: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"url"</span> <span class="attr">name</span>=<span class="string">"use_url"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>number<br>  number类型用于应该包含数值的输入域.<br>  还能设定所接受的数字的限制.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Points: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">name</span>=<span class="string">"points"</span> <span class="attr">min</span>=<span class="string">"1"</span> <span class="attr">max</span>=<span class="string">"10"</span> <span class="attr">step</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"6"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>range<br>  range类型用于应该包含一定范围内数字值的输入域.<br>  range类型显示为滑动条<br>  还能设定对所接受数字的限制<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"range"</span> <span class="attr">name</span>=<span class="string">"point"</span> <span class="attr">min</span>=<span class="string">"1"</span> <span class="attr">max</span>=<span class="string">"10"</span> <span class="attr">step</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"2"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>date pickers</p>
<ul>
<li>date 选取日 年 月</li>
<li>month 选取月 年</li>
<li>week 选取周 年</li>
<li>time 选取时间(小时 分钟)</li>
<li>datetime 选取时间 日 月 年 (UTC 时间)</li>
<li>datetime-local 选取时间 日 月 年 (本地时间)<br>实例<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Date: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span> <span class="attr">name</span>=<span class="string">"user_date"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>tel<br>  tel类型用于应该包含电话号码的输入域.<br>  在表单提交时,会自动验证 tel域的值.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Tel: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"tel"</span> <span class="attr">name</span>=<span class="string">"user_tel"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>color<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Color: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"color"</span> <span class="attr">name</span>=<span class="string">"color"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>search<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Search: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"search"</span> <span class="attr">name</span>=<span class="string">"search"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h3><ul>
<li><p>datalist<br>  datalist 元素规定输入域的选项列表.<br>  列表是通过 datalist 内的 option 元素创建的.<br>  如需把 datalist 绑定到输入域，请用输入域的 list 属性引用 datalist 的 id<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Hobby: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">list</span>=<span class="string">"hobby"</span> <span class="attr">name</span>=<span class="string">"hobby"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">"hobby"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"basketball"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"football"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"pingpang"</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!-- option元素永远都要设置 value 属性 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>keygen<br>  keygen 元素提供一种验证用户的可靠方法.<br>  keygen 元素是密钥对生成器.当表单提交时,会生成两个键,一个公钥,一个私钥.公钥发送到服务器,私钥存储到客户端.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></div><div class="line">    Username: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user_name"</span>&gt;</span></div><div class="line">    Encryption: <span class="tag">&lt;<span class="name">keygen</span> <span class="attr">name</span>=<span class="string">"security"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>output<br>  output 元素用于不同类型的输出,比如计算或脚本输出.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">resCalc</span>(<span class="params"></span>)</span></div><div class="line">&#123;</div><div class="line">numA=<span class="built_in">document</span>.getElementById(<span class="string">"num_a"</span>).value;</div><div class="line">numB=<span class="built_in">document</span>.getElementById(<span class="string">"num_b"</span>).value;</div><div class="line"><span class="built_in">document</span>.getElementById(<span class="string">"result"</span>).value=<span class="built_in">Number</span>(numA)+<span class="built_in">Number</span>(numB);</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>使用 output 元素的简易计算器：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onsubmit</span>=<span class="string">"return false"</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"num_a"</span> /&gt;</span> +</div><div class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"num_b"</span> /&gt;</span> =</div><div class="line"> <span class="tag">&lt;<span class="name">output</span> <span class="attr">id</span>=<span class="string">"result"</span> <span class="attr">onforminput</span>=<span class="string">"resCalc()"</span>&gt;</span><span class="tag">&lt;/<span class="name">output</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="表单属性"><a href="#表单属性" class="headerlink" title="表单属性"></a>表单属性</h3><ul>
<li><p>form 属性</p>
<ul>
<li><p>autocomplete<br>  autocomplete 属性规定 form 或 input 域应该拥有的自动完成功能.<br>  注释：autocomplete 适用于 <form> 标签，以及以下类型的 <input> 标签：text, search, url, telephone, email, password, datepickers, range 以及 color.<br>  当用户在自动完成域中开始输入时，浏览器应该在该域中显示填写的选项.<br>  实例</form></p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">autocomplete</span>=<span class="string">"on"</span>&gt;</span></div><div class="line">    First name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span> /&gt;</span></div><div class="line">    Last name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"lname"</span> /&gt;</span></div><div class="line">    E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>novalidate<br>  novalidate 属性规定在提交表单时不应该验证 form 或者 input 域.<br>  注释：novalidate 属性适用于 <form> 以及以下类型的 <input> 标签：text, search, url, telephone, email, password, date pickers, range 以及 color.<br>  实例</form></p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"domo"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">novalidate</span>=<span class="string">"true"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>input 属性</p>
<ul>
<li>autocomplete</li>
<li><p>autofocus<br>  autofocus 属性规定页面加载时,域自动获取焦点.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">User name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user_name"</span> <span class="attr">autofocus</span>=<span class="string">"autofocus"</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>form<br>  form 属性规定输入域所属的一个或多个表单.<br>  form 属性必须引用所属表单的 id.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">id</span>=<span class="string">"user_name"</span>&gt;</span></div><div class="line">    First name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">Last name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"lname"</span> <span class="attr">form</span>=<span class="string">"user_name"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>multiple<br>  multiple 属性规定输入域可选择多个值.<br>  注释：multiple 属性适用于以下类型的 <input> 标签：email 和 file.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Select images: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"img"</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>placeholder<br>  placeholder 属性提供一种提示,描述输入域所期待的值.<br>  注释：placeholder 属性适用于以下类型的 <input> 标签：text, search, url, telephone, email 以及 password.<br>  提示（hint）会在输入域为空时显示出现，会在输入域获得焦点时消失.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"search"</span> <span class="attr">name</span>=<span class="string">"search"</span> <span class="attr">placeholder</span>=<span class="string">"黄山烧饼"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>required<br>  required 属性规定必须在提交之前填写输入域.<br>  注释：required 属性适用于以下类型的 <input> 标签：text, search, url, telephone, email, password, date pickers, number, checkbox, radio 以及 file.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"user_name"</span> <span class="attr">required</span>=<span class="string">"required"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>pattern<br>  pattern 属性规定用于验证 input 域的模式, 该模式是正则表达式.<br>  注释：pattern 属性适用于以下类型的 <input> 标签：text, search, url, telephone, email 以及 password.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Tel: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"telephone"</span> <span class="attr">name</span>=<span class="string">"telephone"</span> <span class="attr">pattern</span>=<span class="string">"[0-9]&#123;11&#125;"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>min max step<br>  min、max 和 step 属性用于为包含数字或日期的 input 类型规定限定.<br>  max 属性规定输入域所允许的最大值.<br>  min 属性规定输入域所允许的最小值.<br>  step 属性为输入域规定合法的数字间隔（如果 step=”3”，则合法的数是 -3,0,3,6 等）.<br>  注释：min、max 和 step 属性适用于以下类型的 <input> 标签：date pickers、number 以及 range.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Points: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">name</span>=<span class="string">"points"</span> <span class="attr">min</span>=<span class="string">"0"</span> <span class="attr">max</span>=<span class="string">"10"</span> <span class="attr">step</span>=<span class="string">"3"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>width 和 height<br>  height 和 width 属性规定用于 image 类型的 input 标签的图像高度和宽度.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"image"</span> <span class="attr">src</span>=<span class="string">"img/nihao.jpg"</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"100"</span> /&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>表单重写属性<br>  表单重写属性（form override attributes）允许您重写 form 元素的某些属性设定.<br>  formaction - 重写表单的 action 属性<br>  formenctype - 重写表单的 enctype 属性<br>  formmethod - 重写表单的 method 属性<br>  formnovalidate - 重写表单的 novalidate 属性<br>  formtarget - 重写表单的 target 属性<br>  注释：表单重写属性适用于以下类型的 <input> 标签：submit 和 image.<br>  实例</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo_form.asp"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">id</span>=<span class="string">"user_form"</span>&gt;</span></div><div class="line">E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"userid"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"Submit"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">formaction</span>=<span class="string">"demo_admin.asp"</span> <span class="attr">value</span>=<span class="string">"Submit as admin"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">formnovalidate</span>=<span class="string">"true"</span> <span class="attr">value</span>=<span class="string">"Submit without validation"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/13/01-HTML5-文件读取/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/01/13/01-HTML5-文件读取/" itemprop="url">
                  HTML5-文件操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-01-13T23:47:33+08:00">
                2016-01-13
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HTML5-文件操作"><a href="#HTML5-文件操作" class="headerlink" title="HTML5-文件操作"></a>HTML5-文件操作</h1><hr>
<p>在 HTML 文档中 <code>&lt;input type=&quot;file&quot;&gt;</code> 标签每出现一次，一个 FileUpload 对象就会被创建.<br>该元素包含一个文本输入字段,用来输入文件名,还有一个按钮,用来打开文件选择对话框以便图形化选择文件.<br>该元素的 value 属性保存了用户指定的文件的名称,但是当包含一个 file-upload 元素的表单被提交的时候,浏览器会向服务器发送选中的文件的内容而不仅仅是发送文件名.<br>当用户选择或编辑一个文件名,file-upload 元素触发 onchange 事件.</p>
<ul>
<li><p>这是一个读取文件的简单例子:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">  <span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">html</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"oscar999"</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">  </span></div><div class="line">  function  handleFiles(files)  </div><div class="line">  &#123;  </div><div class="line">    if(files.length)  </div><div class="line">    &#123;  </div><div class="line">       var file = files[0];  </div><div class="line">       var reader = new FileReader();  </div><div class="line">       reader.onload = function()  </div><div class="line">       &#123;  </div><div class="line">           document.getElementById("filecontent").innerHTML = this.result;  </div><div class="line">       &#125;;  </div><div class="line">       reader.readAsText(file);  </div><div class="line">    &#125;  </div><div class="line">  &#125;  </div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </div><div class="line">    </div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span>  </div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">onchange</span>=<span class="string">"handleFiles(this.files)"</span>/&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"filecontent"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>此外 HTML5 支持的 file 操作还支持文件的拖拽,以下是一个简单例子:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">  <span class="meta">&lt;!DOCTYPE HTML&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">html</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"author"</span> <span class="attr">content</span>=<span class="string">"oscar999"</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dropbox"</span>&gt;</span> Drop Here <span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"filecontent"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined">  </span></div><div class="line">      var dropbox = document.getElementById("dropbox");    </div><div class="line">      dropbox.addEventListener("dragenter", dragenter, false);    </div><div class="line">      dropbox.addEventListener("dragover", dragover, false);    </div><div class="line">      dropbox.addEventListener("drop", drop, false);     </div><div class="line">  </div><div class="line">    function dragenter(e) &#123;    </div><div class="line">        e.stopPropagation();    </div><div class="line">        e.preventDefault();    </div><div class="line">    &#125;    </div><div class="line">  </div><div class="line">    function dragover(e) &#123;    </div><div class="line">        e.stopPropagation();    </div><div class="line">        e.preventDefault();    </div><div class="line">    &#125;  </div><div class="line">  </div><div class="line">    function drop(e) &#123;    </div><div class="line">        e.stopPropagation();    </div><div class="line">        e.preventDefault();     </div><div class="line">        var dt = e.dataTransfer;    </div><div class="line">        var files = dt.files;  </div><div class="line">        if(files.length)  </div><div class="line">        &#123;  </div><div class="line">           var file = files[0];  </div><div class="line">           var reader = new FileReader();  </div><div class="line">           reader.onload = function()  </div><div class="line">           &#123;  </div><div class="line">               document.getElementById("filecontent").innerHTML = this.result;  </div><div class="line">           &#125;;  </div><div class="line">           reader.readAsText(file);  </div><div class="line">        &#125;  </div><div class="line">    &#125;   </div><div class="line">            </div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span>  </div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>同后端的交互:<br>在一般的HTML中,使用方式是把file input 放在form 中, 以POST 方式把文件传递到后端.<br>在 HTML5 中, 也可以通过 FileReader 的 readAsBinaryString 方法读取到文件的二进制码,然后通过 XMLHttpRequest 的 sendAsBinary 方法将其发送出去.<br>代码如下:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest();  </div><div class="line">xhr.open(<span class="string">"POST"</span>, <span class="string">"url"</span>);  </div><div class="line">xhr.overrideMimeType(<span class="string">'text/plain; charset=x-user-defined-binary'</span>);  </div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">code_snippet_id</span>=<span class="string">"422893"</span> <span class="attr">snippet_file_name</span>=<span class="string">"blog_20140709_4_2106578"</span> <span class="attr">class</span>=<span class="string">"sh_javascript sh_sourceCode"</span> <span class="attr">name</span>=<span class="string">"code"</span>&gt;</span></span></div><div class="line">xhr<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sh_symbol"</span>&gt;</span>.<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sh_function"</span>&gt;</span>sendAsBinary<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sh_symbol"</span>&gt;</span>(<span class="tag">&lt;/<span class="name">span</span>&gt;</span>binaryString<span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"sh_symbol"</span>&gt;</span>);<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span><span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2014/01/15/HelloWorld/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="流浪猫">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/llmaopp.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="流浪猫的 Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="流浪猫的 Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2014/01/15/HelloWorld/" itemprop="url">
                  HelloWorld
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2014-01-15T23:47:33+08:00">
                2014-01-15
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="千里之行-始于-HelloWorld"><a href="#千里之行-始于-HelloWorld" class="headerlink" title="千里之行 始于 HelloWorld"></a>千里之行 始于 HelloWorld</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/llmaopp.jpg"
               alt="流浪猫" />
          <p class="site-author-name" itemprop="name">流浪猫</p>
          <p class="site-description motion-element" itemprop="description">不忘初心,方得始终</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">流浪猫</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  




  
  

  

  

  

  


</body>
</html>
